
classify_template: |
  You are a classification assistant. You will be given a document, and your job is to decide whether it is a 'template' or an 'example'.

  A *template* is a reusable structure with placeholders and instructions, meant to be filled out.
  An *example* is a completed document, showing a concrete, filled-out instance.

  Only respond with one word, either 'template' or 'example', in lowercase. No explanation.

  Document:

fill_template_step_by_step: |
  You are a radiologist assistant. Your task is to fill the JSON template field "{field}" based on this free-text radiology report:

  {report}

  Return ONLY the raw value for "{field}", with no extra keys or surrounding punctuation, and no additional explanation.

fill_template_at_once: |
  You are a template filling assistant. You will be given a freetext radiology report and a template. Your task is to fill in all placeholders in the template based on the report content. Follow these steps:

  1. Analyze the freetext report to find relevant information for each placeholder "__FILL__" in the template.
  2. Fill in each placeholder "__FILL__" with the most relevant information from the report.
  3. If a placeholder "__FILL__" is not applicable or no relevant information is found, replace it with "No information found".
  4. Return only the fully filled JSON template with all placeholders filled and nothing else.

extract_metadata: |
  You are a radiology assistant. Given the following free-text radiology report, extract exactly two fields in JSON format with keys:
    - modality (e.g. "CT", "MR", "XR", etc. Specifically, use "MR" for MRI, "CT" for CT scans, "XR" for X-rays, and "US" for ultrasound.)
    - area (anatomical region, e.g. "head", "abdomen", etc.)
  If any field cannot be determined, return an empty string for it.
  Report:
  """
  {report}
  """
  Respond only with a JSON object.

extract_search_phrase: |
  You are a radiology assistant. You will be given a free-text radiology report and its metadata placeholders:
    modality: {modality}
    area: {area}
  Generate a single concise search phrase capturing the single most important finding, followed by "({modality} of the {area})".

template_selection: |
  You are given a descriptive phrase extracted from a freetext report and names of several structured template candidates.
  Please select the **best matching template** based on the similarity of the phrase to the templates.
  Return ONLY the filename of the best match.

  Free text report: {report}
  Name of Templates: {templates}

  Respond only with the filename string.